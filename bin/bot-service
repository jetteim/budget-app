#!/usr/bin/env ruby
class BotService
  require 'colored'
  require 'config/bot.rb'
  require 'lib/telegram_listener.rb'
  require 'lib/telegram_responder.rb'

  listener = TelegramListener.new
  responder = TelegramResponder.new
  processor = InputProcessor.new
  loop do
	replies = []
	listener.getUpdatesBunlde.each {|user, input| replies << processor.process_telegram(user, input)}
 	responder.replyBundle(replies.flatten)
  end
end
